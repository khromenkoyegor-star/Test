<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Професійна очистка систем вентиляції від жиру та пилу. POK Vitryaky - працюємо по всій Україні. Відеоінспекція, акти для ДСНС, нічні зміни.">
    <title>Очистка вентиляції | POK Vitryaky</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- CORE BASE --- */
        html { scroll-behavior: smooth; }
        body {
            height: 800vh; /* Оптимізована висота для кращого пейсингу */
            margin: 0;
            background-color: #050505;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            color: white;
        }

        /* --- FIXED LAYERS --- */
        .fixed-viewport {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            overflow: hidden; display: flex; align-items: center; justify-content: center;
        }
        .bg-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; will-change: opacity; transition: opacity 0.1s linear;
        }
        .overlay-grad {
            position: absolute; inset: 0; 
            background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.9) 100%);
            z-index: 20; pointer-events: none;
        }

        /* --- NAVIGATION --- */
        .nav-sticky {
            position: fixed; top: 0; left: 0; width: 100%; z-index: 100;
            padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;
            transition: all 0.3s ease;
        }
        .nav-sticky.scrolled {
            background: rgba(5, 5, 5, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding: 10px 20px;
        }

        /* --- CONTENT BLOCKS --- */
        .content-block {
            position: absolute; top: 0; left: 0; width: 100%; height: 100vh;
            display: flex; flex-direction: column; 
            align-items: center; justify-content: center;
            z-index: 30; pointer-events: none; 
            padding: 20px;
            opacity: 0; transition: opacity 0.5s ease-out, visibility 0.5s; 
            visibility: hidden;
        }
        .content-block.visible { opacity: 1; visibility: visible; }
        .content-block > * { pointer-events: auto; }

        /* --- ANIMATIONS --- */
        .cinematic-text {
            opacity: 0; filter: blur(15px); transform: scale(1.1) translateY(30px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1); will-change: transform, opacity, filter;
        }
        .in-focus {
            opacity: 1 !important; filter: blur(0) !important; transform: scale(1) translateY(0) !important;
        }
        .text-shadow-strong { text-shadow: 0 10px 30px rgba(0,0,0,0.9), 0 2px 4px rgba(0,0,0,0.6); }

        /* --- BLOCK 2: RISKS (Optimized) --- */
        .sun-container { position: relative; width: 1000px; height: 600px; display: flex; justify-content: center; align-items: center; }
        .sun-anchor { position: absolute; width: 300px; height: 120px; z-index: 20; }
        .pos-tl { bottom: 55%; right: 55%; } .pos-tr { bottom: 55%; left: 55%; }
        .pos-bl { top: 55%; right: 55%; } .pos-br { top: 55%; left: 55%; }
        
        .sun-card {
            position: absolute; width: 100%; height: 100%;
            background: rgba(20, 20, 20, 0.6); backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px;
            padding: 1.5rem; display: flex; flex-direction: column; justify-content: center;
            cursor: pointer; transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); overflow: hidden;
        }
        .pos-tl .sun-card, .pos-tr .sun-card { bottom: 0; transform-origin: bottom center; }
        .pos-bl .sun-card, .pos-br .sun-card { top: 0; transform-origin: top center; }
        
        .sun-card:hover, .sun-card.active {
            height: 260px; background: rgba(30, 30, 30, 0.95);
            border-color: #fbbf24; z-index: 50; box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }
        .hidden-text { opacity: 0; max-height: 0; margin-top: 0; font-size: 0.9rem; color: #ccc; transition: all 0.4s ease; }
        .sun-card:hover .hidden-text, .sun-card.active .hidden-text { opacity: 1; max-height: 200px; margin-top: 15px; }
        
        /* Mobile Risks */
        .risk-mobile-layout { display: flex; flex-direction: column; gap: 15px; width: 100%; max-width: 400px; }
        .risk-card-mob {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            padding: 15px; border-radius: 12px; margin-bottom: 10px;
        }

        /* --- BLOCK 3: SERVICES --- */
        .services-matrix { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; width: 100%; max-width: 900px; }
        .photo-box {
            width: 100%; aspect-ratio: 1/1; position: relative; border-radius: 12px; overflow: hidden;
            background: #111; border: 2px solid rgba(255,255,255,0.1);
        }
        .photo-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; transition: opacity 1s; }
        .img-after { opacity: 0; }
        .photo-box.state-after { border-color: #fbbf24; box-shadow: 0 0 25px rgba(251, 191, 36, 0.4); }
        .photo-box.state-after .img-after { opacity: 1; }
        
        /* --- BLOCK 4: PORTFOLIO --- */
        .cinematic-stage { 
            position: relative; width: 95%; max-width: 1000px; height: 500px; 
            background: rgba(10, 10, 10, 0.8); border: 1px solid rgba(255, 255, 255, 0.1); 
            border-radius: 24px; overflow: hidden; display: flex; 
        }
        .slide-item { 
            position: absolute; inset: 0; display: flex; opacity: 0; 
            pointer-events: none; transition: opacity 0.5s ease; 
        }
        .slide-item.active { opacity: 1; pointer-events: auto; }
        @media (max-width: 768px) { .slide-item { flex-direction: column; } }

        /* --- BLOCK 5: TEAM --- */
        .carousel-container {
            width: 100%; overflow-x: scroll; scroll-snap-type: x mandatory;
            display: flex; align-items: center; height: 500px; padding: 0 35vw;
            scrollbar-width: none;
        }
        .carousel-container::-webkit-scrollbar { display: none; }
        .card-wrapper { flex: 0 0 320px; height: 450px; scroll-snap-align: center; margin: 0 15px; perspective: 1000px; }
        .card-inner {
            width: 100%; height: 100%; background: #141414; border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column;
            overflow: hidden; transition: transform 0.3s;
        }
        .card-inner img { height: 60%; width: 100%; object-fit: cover; }
        .card-content { padding: 15px; height: 40%; display: flex; flex-direction: column; justify-content: space-between; }

        /* --- BLOCK 6: LEAD FORM --- */
        .form-container {
            background: rgba(20, 20, 20, 0.9); border: 1px solid rgba(255,255,255,0.1);
            padding: 40px; border-radius: 20px; width: 100%; max-width: 500px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        .input-field {
            width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: white; padding: 15px; border-radius: 8px; margin-bottom: 15px; outline: none;
            transition: border-color 0.3s;
        }
        .input-field:focus { border-color: #fbbf24; }

        /* Responsive */
        @media (max-width: 768px) {
            .sun-container { display: none; }
            .services-matrix { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .card-wrapper { flex: 0 0 80vw; padding: 0; }
            .carousel-container { padding: 0 10vw; }
            #block6 .content-block { padding: 10px; }
        }
    </style>
</head>
<body>

    <nav class="nav-sticky" id="navbar">
        <div class="flex items-center gap-2">
            <div class="font-playfair font-bold text-xl md:text-2xl tracking-wider">
                POK<span class="text-amber-500">Vitryaky</span>
            </div>
        </div>
        <div class="flex items-center gap-4">
            <a href="tel:+380990000000" class="hidden md:block text-white/80 hover:text-amber-400 font-mono text-sm transition-colors font-bold">+380 (99) 000-00-00</a>
            <button onclick="scrollToBlock(5)" 
                    class="bg-amber-600 hover:bg-amber-500 text-white px-5 py-2 rounded-full font-bold text-xs md:text-sm uppercase tracking-widest shadow-lg transition-all transform hover:scale-105">
                Замовити
            </button>
        </div>
    </nav>

    <div class="fixed-viewport">
        <img src="clean.WEBP" onerror="this.style.display='none'" alt="Clean duct" class="bg-layer z-0">
        <img src="dirty.WEBP" onerror="this.style.display='none'" id="dirtyImage" alt="Dirty duct" class="bg-layer z-10">
        <div class="overlay-grad"></div>

        <div id="block1" class="content-block visible" style="z-index: 40;">
            <div class="text-center max-w-4xl">
                <p class="text-amber-500 font-bold tracking-[0.2em] uppercase mb-4 cinematic-text in-focus">Професійна очистка вентиляції</p>
                <h1 id="hero-title" class="cinematic-text in-focus text-5xl md:text-7xl lg:text-8xl font-extrabold leading-tight text-shadow-strong">
                    ПОЖЕЖА<br>ЧЕКАЄ НА ЖИР
                </h1>
                <h2 class="cinematic-text in-focus text-xl md:text-2xl font-light mt-6 text-gray-300 max-w-2xl mx-auto">
                    64% загорянь у ресторанах стаються через брудну вентиляцію. <br>Ми усуваємо ризик, поки ви спите.
                </h2>
            </div>
            <div id="scroll-hint" class="absolute bottom-10 flex flex-col items-center gap-2 opacity-70 animate-bounce">
                <span class="text-xs uppercase tracking-widest">Гортайте вниз</span>
                <i data-lucide="chevron-down"></i>
            </div>
        </div>

        <div id="block2" class="content-block">
            <div class="sun-container hidden md:flex cinematic-text">
                <div class="z-10 text-center pointer-events-none">
                    <h2 class="text-5xl font-bold text-shadow-strong leading-tight">
                        ЧИМ РИЗИКУЄ<br><span class="text-amber-500">ВАШ БІЗНЕС?</span>
                    </h2>
                </div>
                
                <div class="sun-anchor pos-tl">
                    <div class="sun-card"><i data-lucide="flame" class="text-amber-500 w-8 h-8 mb-2"></i><h3 class="font-bold text-xl">Пожежа</h3><p class="hidden-text">Жировий пил спалахує як порох. Вогонь поширюється вентиляцією по всій будівлі за лічені хвилини.</p></div>
                </div>
                <div class="sun-anchor pos-tr">
                    <div class="sun-card"><i data-lucide="file-warning" class="text-amber-500 w-8 h-8 mb-2"></i><h3 class="font-bold text-xl">Штрафи ДСНС</h3><p class="hidden-text">Порушення правил пожежної безпеки веде до штрафів та примусового закриття закладу.</p></div>
                </div>
                <div class="sun-anchor pos-bl">
                    <div class="sun-card"><i data-lucide="user-x" class="text-amber-500 w-8 h-8 mb-2"></i><h3 class="font-bold text-xl">Втрата гостей</h3><p class="hidden-text">Задуха та запах горілої олії в залі відлякують клієнтів швидше, ніж високі ціни.</p></div>
                </div>
                <div class="sun-anchor pos-br">
                    <div class="sun-card"><i data-lucide="zap" class="text-amber-500 w-8 h-8 mb-2"></i><h3 class="font-bold text-xl">Перевитрати</h3><p class="hidden-text">Брудний вентилятор споживає на 30% більше електроенергії та швидше ламається.</p></div>
                </div>
            </div>

            <div class="risk-mobile-layout md:hidden cinematic-text">
                <h2 class="text-3xl font-bold text-center mb-4">РИЗИКИ БІЗНЕСУ</h2>
                <div class="risk-card-mob"><i data-lucide="flame" class="text-amber-500 inline mr-2"></i><span class="font-bold">Пожежа:</span> Миттєве займання жиру.</div>
                <div class="risk-card-mob"><i data-lucide="file-warning" class="text-amber-500 inline mr-2"></i><span class="font-bold">Штрафи:</span> Закриття закладу ДСНС.</div>
                <div class="risk-card-mob"><i data-lucide="zap" class="text-amber-500 inline mr-2"></i><span class="font-bold">Витрати:</span> +30% до рахунку за світло.</div>
            </div>
        </div>

        <div id="block3" class="content-block">
            <div class="text-center mb-6 px-4 cinematic-text">
                <h2 class="text-2xl md:text-4xl font-bold mb-2">ПОВНА <span class="text-amber-500">ДЕТОКСИКАЦІЯ</span> СИСТЕМИ</h2>
                <p class="text-sm md:text-base text-gray-300">Ми не просто "протираємо". Ми відновлюємо пропускну здатність.</p>
            </div>
            
            <div class="services-matrix cinematic-text">
                <div class="flex flex-col items-center"><span class="mb-2 font-bold text-sm">Зонти</span><div class="photo-box" id="srv-1"><img src="1.webp" class="photo-img img-before"><img src="2.webp" class="photo-img img-after"></div></div>
                <div class="flex flex-col items-center"><span class="mb-2 font-bold text-sm">Фільтри</span><div class="photo-box" id="srv-2"><img src="3.webp" class="photo-img img-before"><img src="4.webp" class="photo-img img-after"></div></div>
                <div class="flex flex-col items-center"><span class="mb-2 font-bold text-sm">Канали</span><div class="photo-box" id="srv-3"><img src="5.webp" class="photo-img img-before"><img src="6.webp" class="photo-img img-after"></div></div>
                <div class="flex flex-col items-center"><span class="mb-2 font-bold text-sm">Вентилятори</span><div class="photo-box" id="srv-4"><img src="7.webp" class="photo-img img-before"><img src="8.webp" class="photo-img img-after"></div></div>
                <div class="flex flex-col items-center"><span class="mb-2 font-bold text-sm">Дифузори</span><div class="photo-box" id="srv-5"><img src="9.webp" class="photo-img img-before"><img src="10.webp" class="photo-img img-after"></div></div>
                <div class="flex flex-col items-center"><span class="mb-2 font-bold text-sm">Двигуни</span><div class="photo-box" id="srv-6"><img src="11.webp" class="photo-img img-before"><img src="12.webp" class="photo-img img-after"></div></div>
            </div>

            <div class="mt-8 grid grid-cols-2 md:grid-cols-4 gap-4 w-full max-w-4xl px-4 text-xs md:text-sm text-gray-400 cinematic-text">
                <div class="flex items-center gap-2"><i data-lucide="moon" class="text-amber-500"></i> Нічні роботи</div>
                <div class="flex items-center gap-2"><i data-lucide="beaker" class="text-amber-500"></i> Хімія (Іспанія)</div>
                <div class="flex items-center gap-2"><i data-lucide="camera" class="text-amber-500"></i> Відеозвіт</div>
                <div class="flex items-center gap-2"><i data-lucide="file-check" class="text-amber-500"></i> Акт для ДСНС</div>
            </div>
        </div>

        <div id="block4" class="content-block">
            <h2 class="text-2xl md:text-4xl font-bold mb-8 text-center cinematic-text">КЕЙСИ <span class="text-amber-500">POK VITRYAKY</span></h2>
            
            <div class="cinematic-stage cinematic-text">
                <div class="slide-item active" data-index="0">
                    <div class="w-full md:w-1/2 h-full relative overflow-hidden">
                        <img src="41.webp" class="w-full h-full object-cover">
                        <span class="absolute top-4 right-4 text-4xl font-bold text-white/20">01</span>
                    </div>
                    <div class="w-full md:w-1/2 p-8 flex flex-col justify-center bg-[#111]">
                        <h3 class="text-amber-500 font-bold tracking-widest text-sm mb-4 border-l-2 border-amber-500 pl-3">СЕРВІСНІ ЛЮЧКИ</h3>
                        <p class="text-gray-300 text-sm md:text-base leading-relaxed">Встановлюємо ревізійні люки для доступу до складних ділянок. Це дозволяє чистити систему повністю, а не тільки там, де "дістає рука".</p>
                    </div>
                </div>
                <div class="slide-item" data-index="1">
                    <div class="w-full md:w-1/2 h-full relative overflow-hidden">
                        <img src="42.webp" class="w-full h-full object-cover">
                        <span class="absolute top-4 right-4 text-4xl font-bold text-white/20">02</span>
                    </div>
                    <div class="w-full md:w-1/2 p-8 flex flex-col justify-center bg-[#111]">
                        <h3 class="text-amber-500 font-bold tracking-widest text-sm mb-4 border-l-2 border-amber-500 pl-3">РЕМОНТ ТА ДІАГНОСТИКА</h3>
                        <p class="text-gray-300 text-sm md:text-base leading-relaxed">Під час чистки виявили аварійний дифузор, що міг впасти на персонал. Виконали терміновий ремонт кріплень.</p>
                    </div>
                </div>
                <div class="absolute bottom-0 right-0 w-full md:w-1/2 h-[60px] bg-black/50 border-t border-white/10 flex items-center justify-between px-6">
                    <div class="flex gap-4">
                        <button id="prevBtn" class="hover:text-amber-500 transition"><i data-lucide="chevron-left"></i></button>
                        <button id="nextBtn" class="hover:text-amber-500 transition"><i data-lucide="chevron-right"></i></button>
                    </div>
                    <div class="h-[2px] bg-white/20 w-32 relative"><div id="progFill" class="absolute top-0 left-0 h-full bg-amber-500 w-1/2 transition-all"></div></div>
                </div>
            </div>
        </div>

        <div id="block5" class="content-block">
            <h2 class="text-3xl font-bold mb-2 cinematic-text">КОМАНДА</h2>
            <p class="text-gray-400 text-sm mb-8 cinematic-text">Ми проектуємо, монтуємо та обслуговуємо.</p>
            
            <div class="carousel-container cinematic-text" id="teamTrack">
                <div class="card-wrapper"><div class="card-inner"><img src="5.1.webp"><div class="card-content"><p class="italic text-gray-400 text-xs">"Вирішити можна все. Неможливе вирішується трохи довше."</p><div><h4 class="font-bold uppercase">Хроменко Єгор</h4><span class="text-amber-500 text-xs font-bold">Комерційний Директор</span></div></div></div></div>
                <div class="card-wrapper"><div class="card-inner"><img src="5.2.webp"><div class="card-content"><p class="italic text-gray-400 text-xs">"Чим складніший підйом, тим краща перспектива."</p><div><h4 class="font-bold uppercase">Внуков Валерій</h4><span class="text-amber-500 text-xs font-bold">Технічний Директор</span></div></div></div></div>
                <div class="card-wrapper"><div class="card-inner"><img src="5.3.webp"><div class="card-content"><p class="italic text-gray-400 text-xs">"Налаштовую повітроводи як музичний інструмент."</p><div><h4 class="font-bold uppercase">Ярослав Іванченко</h4><span class="text-amber-500 text-xs font-bold">Бригадир</span></div></div></div></div>
            </div>
        </div>

        <div id="block6" class="content-block" style="background: black; z-index: 60;">
            <div class="form-container cinematic-text text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-white">ЗАМОВИТИ АУДИТ</h2>
                <p class="text-gray-400 mb-8 text-sm">Залиште контакти. Ми зв'яжемося за 10 хвилин, прорахуємо вартість та домовимось про безкоштовний огляд об'єкту.</p>
                
                <form onsubmit="event.preventDefault(); alert('Дякую! Це демо-форма. Тут має бути підключення до Telegram/CRM.');">
                    <input type="text" placeholder="Ваше Ім'я" class="input-field" required>
                    <input type="tel" placeholder="Телефон (0XX) XXX-XX-XX" class="input-field" required>
                    <button type="submit" class="w-full bg-amber-600 hover:bg-amber-500 text-white font-bold py-4 rounded-lg uppercase tracking-wider transition-all shadow-lg shadow-amber-900/20 mt-2">
                        Отримати консультацію
                    </button>
                </form>
                <div class="mt-6 text-xs text-gray-600">
                    <p>Працюємо офіційно. ТОВ / ФОП 3 група.<br>Ліцензія на висотні роботи.</p>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- 1. PERFORMANCE OPTIMIZED SCROLL LOGIC ---
        let lastScrollY = window.scrollY;
        let ticking = false;

        const dirtyImg = document.getElementById('dirtyImage');
        const blocks = Array.from(document.querySelectorAll('.content-block'));
        const nav = document.getElementById('navbar');
        const totalHeight = document.body.scrollHeight - window.innerHeight;

        function updateState() {
            const progress = window.scrollY / totalHeight; // 0 to 1
            const percentage = progress * 100;

            // 1. Background Blending
            // Show dirty image at start (0%), clean image at end (100%)
            // Logic: Dirty image opacity goes from 1 to 0
            if (dirtyImg) dirtyImg.style.opacity = Math.max(0, 1 - (progress * 1.5)); // Fades out faster

            // 2. Navigation Bar
            if (window.scrollY > 50) nav.classList.add('scrolled');
            else nav.classList.remove('scrolled');

            // 3. Block Visibility Logic (Divided into 6 segments approx 16% each)
            // Block 1: 0-15% | Block 2: 15-30% | Block 3: 30-50% | Block 4: 50-70% | Block 5: 70-85% | Block 6: 85-100%
            
            blocks.forEach(b => b.classList.remove('visible', 'in-focus')); // Reset safety
            
            let activeIndex = 0;
            if (percentage < 15) activeIndex = 0;
            else if (percentage < 32) activeIndex = 1;
            else if (percentage < 52) activeIndex = 2;
            else if (percentage < 72) activeIndex = 3;
            else if (percentage < 88) activeIndex = 4;
            else activeIndex = 5;

            // Activate current block
            const currentBlock = blocks[activeIndex];
            if (currentBlock) {
                currentBlock.classList.add('visible');
                // Trigger internal animations
                const anims = currentBlock.querySelectorAll('.cinematic-text');
                anims.forEach(a => a.classList.add('in-focus'));
                
                // Specific Logic for Block 3 (After/Before effect)
                if (activeIndex === 2) {
                    const boxes = document.querySelectorAll('.photo-box');
                    boxes.forEach((box, i) => {
                        // Staggered activation based on sub-scroll within the block could go here
                        // For simplicity, we activate all or random "flicker"
                        setTimeout(() => box.classList.add('state-after'), i * 200);
                    });
                } else {
                    document.querySelectorAll('.photo-box').forEach(b => b.classList.remove('state-after'));
                }
            }
            
            ticking = false;
        }

        window.addEventListener('scroll', () => {
            lastScrollY = window.scrollY;
            if (!ticking) {
                window.requestAnimationFrame(updateState);
                ticking = true;
            }
        });

        // --- 2. PORTFOLIO SLIDER LOGIC ---
        const slides = document.querySelectorAll('.slide-item');
        const fill = document.getElementById('progFill');
        let curSlide = 0;

        function updateSlider() {
            slides.forEach((s, i) => {
                s.classList.toggle('active', i === curSlide);
            });
            fill.style.width = `${((curSlide + 1) / slides.length) * 100}%`;
        }

        document.getElementById('nextBtn').addEventListener('click', () => {
            curSlide = (curSlide + 1) % slides.length;
            updateSlider();
        });
        document.getElementById('prevBtn').addEventListener('click', () => {
            curSlide = (curSlide - 1 + slides.length) % slides.length;
            updateSlider();
        });

        // --- 3. TEAM CAROUSEL (Simple scroll snap helper) ---
        const teamTrack = document.getElementById('teamTrack');
        
        // Auto-center effect on scroll
        teamTrack.addEventListener('scroll', () => {
            const cards = document.querySelectorAll('.card-inner');
            const center = teamTrack.scrollLeft + (teamTrack.offsetWidth / 2);
            
            cards.forEach(card => {
                const wrapper = card.parentElement;
                const cardCenter = wrapper.offsetLeft + (wrapper.offsetWidth / 2);
                const dist = Math.abs(center - cardCenter);
                const scale = Math.max(0.8, 1 - (dist / 1000));
                
                card.style.transform = `scale(${scale})`;
                card.style.opacity = scale < 0.9 ? 0.5 : 1;
            });
        });

        // --- 4. UTILS ---
        function scrollToBlock(index) {
            // Calculate position based on 800vh
            const total = document.body.scrollHeight;
            const target = (total / 6) * index; 
            window.scrollTo({ top: target, behavior: 'smooth' });
        }

        // Init icons
        lucide.createIcons();
        updateState(); // Initial check
    </script>
</body>
</html>
